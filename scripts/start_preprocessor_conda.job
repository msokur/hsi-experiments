#!/bin/bash
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=16
#SBATCH --mem-per-cpu=16G
#SBATCH --job-name=prepro
#SBATCH --partition=clara
#SBATCH --time=40:00:00

#SBATCH --output=outputs/PrePro_HNO_2__9x9_SNV_NO_SMOOTH%j.log

## remove all previously loaded modules
module purge

## source your .bashrc to load conda
source ~/.bashrc

## deactivate the conda base env
conda deactivate

## load the anaconda module 
module load Anaconda3/2023.09-0

## enter the name from your env
CONDA_ENV="hsi_env"

## activate conda env
conda activate $CONDA_ENV
conda list

## load repository variables
source repo_variables.sh

## load the check.py
python $REPOSITORY_ROOT/scripts/check.py

module list

## run python script
python $REPOSITORY_ROOT/data_utils/preprocessor.py

## deactivate conda env
conda deactivate